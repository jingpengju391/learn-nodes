# 从输入URL到页面加载发生了什么2

一、DNS 解析

二、TCP链接

三、浏览器渲染



#### 一、DNS 解析

​	查找dns缓存 、查找host文件、查找预设如果都没找到。查找根服务器、顶级服务器、最后由权威服务器返回对应的ip地址

​	得到ip后dns先要缓存下来，然后返给操作系统，由操作系统返给浏览器

#### 二、TCP链接

​	三次握手：由浏览器携带者 序列号 A 发送给服务器， 服务器将 序列号A+1以及B发送给浏览器， 浏览器将B+1在发给服务器，完成三次握手

​	目的：一个传输过程中可能分几次传输，这样就很容易丢包，为了防止丢包是可以正确发送浏览器所需要的包 我们用序列号记录每次发包的唯一标识

​	四次挥手：TCP四次挥手是指在TCP连接的关闭过程中，双方通信的两个端点（通常是客户端和服务器）彼此协商关闭连接的步骤。以下是TCP四次挥手的详细过程：

1. 客户端发送关闭连接请求：客户端首先向服务器发送一个带有标志位（FIN）的TCP报文段，表示客户端不再发送数据，并希望关闭连接。这个报文段称为"FIN报文段"。
2. 服务器确认关闭请求：服务器收到客户端的FIN报文段后，会发送一个带有确认标志位（ACK）的报文段作为响应，表示已经收到了关闭请求。
3. 服务器发送关闭连接请求：服务器在发送确认报文段后，会继续等待一段时间，以确保客户端已经接收到了确认。在等待期间，服务器可以继续发送数据给客户端。当服务器准备关闭连接时，会发送一个带有FIN标志位的报文段给客户端，表示服务器不再发送数据。
4. 客户端确认关闭请求并关闭连接：客户端收到服务器发送的带有FIN标志位的报文段后，会发送一个带有ACK标志位的报文段作为确认。客户端继续等待一段时间，以确保服务器已经接收到了确认。在等待期间，客户端可以继续接收服务器发送的数据。最后，客户端会发送一个关闭连接的请求给操作系统，关闭TCP连接。

需要注意的是，四次挥手过程中的ACK报文段可以携带数据，表示对方还有数据未接收完毕。这是因为在关闭连接之前，双方可能还有未发送完的数据需要传输。

总结来说，TCP四次挥手是在关闭TCP连接时，双方通信的两个端点彼此协商关闭连接的过程。客户端发送关闭连接请求，服务器确认关闭请求并发送自己的关闭请求，客户端确认关闭请求并关闭连接。这个过程确保了双方都能安全地关闭连接，并保证数据的完整性。

#### 三、浏览器渲染

1. 接受请求响应头（ 内容，缓存机制，状态码 ）
2. 接受主体（ html，css，js ）
3. 解析html为dom,解析css为cssom
4. 构建渲染树
5. 布局 layout
6. 绘制渲染树 painting
7. 运行js
8. 加载资资源
9. 显示

reflow、repaint( 减少repaint,避免reflow )

